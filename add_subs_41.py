# Скрипт: добавить подразделы в 4.1 Электрооборудование
import sqlite3
from config import DATABASE_PATH

SUBS_41 = [
    "Один из аккумуляторов не подключается к бортовой сети",
    "Все аккумуляторы не подключаются к бортовой сети",
    "Не подключаются аккумуляторы к аварийной шине от переключаются \"Автомат-ручное\"",
    "Не подключается на бортовую сеть аэродромный источник электропитания от разъема АР-1",
    "Не подключается на бортовую сеть аэродромный источник электропитания от разъема АР-2",
    "Генератор СТГ-18 ТМО не вырабатывает напряжение 28,5 В",
    "Генератор СТГ-18 ТМО при нормальном напряжении не подключается к бортсети",
    "Нет параллельной работы генераторов СТГ-18 левого и правого между собой",
    "Генератор ГС-24Б не подключается к бортовой сети",
    "Отказ питания напряжением 115 В 400 Гц от генераторов ГО16ПЧ8",
    "Отказ питания напряжением 115 В 400 Гц от преобразователя ПО-750",
    "Нет раскрутки двигателя при запуске",
    "Нет напряжения на шине запуска",
    "Нет перехода на 48 В при запуске двигателей",
    "Не горит лампа сигнализации отказа двигателя в КФЛ-37",
    "Воздушный винт не флюгируется от кнопки КФЛ-37",
    "При работающем флюгернасосе отсутствует сигнализация его работы",
    "Не включается флюгернасос при нажатии на кнопку КФЛ-37",
    "Не горит лампа \"Готовность автофлюгера\"",
    "При проверке флюгирования по ИКМ воздушный винт входит во флюгер, двигатель выключается",
    "Не работают электромеханизмы кранов заправки в ручном режиме",
    "При полной заправке топливного бака нет сигнализации \"Бак заполнен\", \"Кран закрыт\"",
    "Не убираются шасси (для самолетов с недоработанной электросхемой)",
    "Не работает антиюзовая автоматика",
    "Система АРТМ-64 не работает в автоматическом режиме",
    "Не работает обогрев винтов и коков (нет сигнализации и расходного тока)",
    "Величина тока обогрева винтов и коков меньше указанных в индивидуальных особенностях самолета",
    "При температуре ниже настроечной не включается обогрев стекол",
    "Не включается интенсивный обогрев стекол",
    "Ложная сигнализация обледенения ВНА",
    "Не работает откат рампы от основной системы с рабочего места штурмана",
    "Не работает накат рампы от основной системы с рабочего места штурмана",
    "Не работает устройство перемещения поддонов на погрузку (выгрузку)",
    "Не работает электролебедка БЛ-56",
]

def main():
    conn = sqlite3.connect(DATABASE_PATH)
    cur = conn.cursor()
    cur.execute("SELECT id FROM sections WHERE code = ?", ("4.1",))
    row = cur.fetchone()
    if not row:
        print("Раздел 4.1 не найден.")
        conn.close()
        return
    section_id = row[0]
    added = 0
    for name in SUBS_41:
        cur.execute("SELECT id FROM subsections WHERE section_id = ? AND name = ?", (section_id, name))
        if cur.fetchone() is None:
            cur.execute("INSERT INTO subsections (section_id, name) VALUES (?, ?)", (section_id, name))
            added += 1
    conn.commit()
    conn.close()
    print(f"Добавлено подразделов в 4.1: {added}")

if __name__ == "__main__":
    main()
