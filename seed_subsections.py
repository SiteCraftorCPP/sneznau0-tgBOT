"""
Один раз заполнить подразделы (названия пунктов) как на локальной БД.
Запуск на VPS после первого создании БД: python3 seed_subsections.py
"""
import sqlite3
from config import DATABASE_PATH
from database import create_tables

SUBS_41 = [
    "Один из аккумуляторов не подключается к бортовой сети",
    "Все аккумуляторы не подключаются к бортовой сети",
    'Не подключаются аккумуляторы к аварийной шине от переключаются "Автомат-ручное"',
    "Не подключается на бортовую сеть аэродромный источник электропитания от разъема АР-1",
    "Не подключается на бортовую сеть аэродромный источник электропитания от разъема АР-2",
    "Генератор СТГ-18 ТМО не вырабатывает напряжение 28,5 В",
    "Генератор СТГ-18 ТМО при нормальном напряжении не подключается к бортсети",
    "Нет параллельной работы генераторов СТГ-18 левого и правого между собой",
    "Генератор ГС-24Б не подключается к бортовой сети",
    "Отказ питания напряжением 115 В 400 Гц от генераторов ГО16ПЧ8",
    "Отказ питания напряжением 115 В 400 Гц от преобразователя ПО-750",
    "Нет раскрутки двигателя при запуске",
    "Нет напряжения на шине запуска",
    "Нет перехода на 48 В при запуске двигателей",
    "Не горит лампа сигнализации отказа двигателя в КФЛ-37",
    "Воздушный винт не флюгируется от кнопки КФЛ-37",
    "При работающем флюгернасосе отсутствует сигнализация его работы",
    "Не включается флюгернасос при нажатии на кнопку КФЛ-37",
    'Не горит лампа "Готовность автофлюгера"',
    "При проверке флюгирования по ИКМ воздушный винт входит во флюгер, двигатель выключается",
    "Не работают электромеханизмы кранов заправки в ручном режиме",
    'При полной заправке топливного бака нет сигнализации "Бак заполнен", "Кран закрыт"',
    "Не убираются шасси (для самолетов с недоработанной электросхемой)",
    "Не работает антиюзовая автоматика",
    "Система АРТМ-64 не работает в автоматическом режиме",
    "Не работает обогрев винтов и коков (нет сигнализации и расходного тока)",
    "Величина тока обогрева винтов и коков меньше указанных в индивидуальных особенностях самолета",
    "При температуре ниже настроечной не включается обогрев стекол",
    "Не включается интенсивный обогрев стекол",
    "Ложная сигнализация обледенения ВНА",
    "Не работает откат рампы от основной системы с рабочего места штурмана",
    "Не работает накат рампы от основной системы с рабочего места штурмана",
    "Не работает устройство перемещения поддонов на погрузку (выгрузку)",
    "Не работает электролебедка БЛ-56",
]

SUBS_42 = [
    "Негерметична статическая проводка анероидно-мембранных приборов",
    "Негерметична динамическая проводка анероидно-мембранных приборов",
    "Неверные показания курса ГИК-1",
    "Гироиндукционный компас ГИК-1 вяло реагирует на изменение курса при разворотах самолета",
    "Гирополукомпас ГПК-52 АП за короткое время уходит с курса",
    "Неправильное счисление НИ-50 БМК",
    'В полете автопилот АП-28Л1 уводит самолет с курса в режиме "ГИК"',
    'В полете автопилот АП-28Л1 уводит самолет с курса в режиме "ГПК"',
    "В полете автопилот АП-28Л1 не держит высоту",
    "При включении левого АГД-1 нет автоматического запуска ПТ-200Ц",
    "При включении АГБ-3 или ГИК-1 нет автоматического запуска ПТ-200Ц",
    "Блок контроля кренов БКК-18 выдает ложные сигналы об отказе авиагоризонтов",
    "Неправильные показания топливомера СПУТ1-5ВЕ",
    'Несрабатывание или ложное срабатывание сигнализации "Обледенение" от РИО-3',
    "При проверке ССП-2А встроенным контролем не загорается лампа-кнопка от определенной группы датчиков",
    "Самопроизвольное срабатывание 1-й очереди пожаротушения",
    "Падение давления по манометру кислородного указателя ИК-18К",
    'Не мигает сигнальная лампа "Работа ЛПМ"',
]

SUBS_43 = [
    "Невозможность ведения УКВ радиосвязи (УКВ радиостанции исправны)",
    'Мала дальность двухсторонней радиосвязи по радиостанции "Баклан-20"',
    'Неисправна РЛС "Гроза - 26"',
    "Неустойчивые показания УВ-5 радиовысотомера РВ-5",
    'Радиовысотомер РВ-4 не отрабатывает контрольную высоту в режиме "Контроль"',
    "Отсутствует (искажена) информация ответчика СОМ-64",
    "Не работает курсовой канал ОСЬ-1",
    "Не работает глиссадный канал ОСЬ-1",
    'По сообщению наземных служб не работает изделие "020"',
    "Ошибка в показаниях АРК-11 превышает допустимые значения",
    "Радиокомпас АРК-УД не работает в режиме автоматического пеленгования",
    "Не работает канал азимута РСБН-2С",
    "Не работает канал дальности РСБН-2С",
    'Неисправна радиостанция "Микрон"',
]


def seed():
    create_tables()
    conn = sqlite3.connect(DATABASE_PATH)
    cur = conn.cursor()
    total = 0
    for code, names in [("4.1", SUBS_41), ("4.2", SUBS_42), ("4.3", SUBS_43)]:
        cur.execute("SELECT id FROM sections WHERE code = ?", (code,))
        row = cur.fetchone()
        if not row:
            continue
        section_id = row[0]
        for name in names:
            cur.execute("SELECT id FROM subsections WHERE section_id = ? AND name = ?", (section_id, name))
            if cur.fetchone() is None:
                cur.execute("INSERT INTO subsections (section_id, name) VALUES (?, ?)", (section_id, name))
                total += 1
    conn.commit()
    conn.close()
    print(f"Добавлено подразделов: {total}")


if __name__ == "__main__":
    seed()
